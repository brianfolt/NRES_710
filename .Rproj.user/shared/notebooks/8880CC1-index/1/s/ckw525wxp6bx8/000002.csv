"0","rmd2rscript <- function(infile=""LECTURE2.Rmd""){    # function for converting markdown to scripts"
"0","  outfile <- gsub("".Rmd"","".R"",infile)"
"0","  close( file( outfile, open=""w"" ) )   # clear output file"
"0","  con1 <- file(infile,open=""r"")"
"0","  con2 <- file(outfile,""w"")"
"0","  stringToFind <- ""```{r*"""
"0","  stringToFind2 <- ""echo"""
"0","  isrblock <- FALSE"
"0","  #count=0"
"0","  blocknum=0"
"0","  "
"0","  while(length(input <- readLines(con1, n=1)) > 0){   # while there are still lines to be read"
"0","    isrblock <- grepl(input, pattern = stringToFind, perl = TRUE)   # is it the start of an R block?"
"0","    showit <- !grepl(input, pattern = stringToFind2, perl = TRUE)   # is it hidden (echo=FALSE)"
"0","    if(isrblock){"
"0","      blocknum=blocknum+1"
"0","      while(!grepl(newline<-readLines(con1, n=1),pattern=""```"",perl=TRUE)){"
"0","        if((blocknum>1)&((showit)|(blocknum==2))) write(newline,file=con2,append=TRUE)"
"0","        #count=count+1"
"0","      }"
"0","      isrblock=FALSE"
"0","    }"
"0","  }"
"0","  closeAllConnections()"
"0","}"
"0",""
