"0",""
"0","### full power analysis WITH SAMPLE SIZE DETERMINATION:"
"0",""
"0","###### First we will set the population parameters:"
"0",""
"0","true.mean.A <- 13.5"
"0","true.mean.B <- 13.9"
"0",""
"0","true.sd <- 3.4"
"0",""
"0","# Assume a two-tailed test- alternative hypothesis is that the mean of A is different from the mean of B"
"0",""
"0",""
"0","###### now we will simulate LOTS of  'experiments' under different sample sizes"
"0",""
"0","sampsize <- seq(5,400,10)"
"0",""
"0","power <- numeric(length(sampsize))"
"0",""
"0","for(j in 1:length(sampsize)){"
"0","  "
"0","  pvals <- numeric(1000)"
"0","  for(i in 1:1000){"
"0","    samp.A <- rnorm(sampsize[j],true.mean.A,true.sd)"
"0","    samp.B <- rnorm(sampsize[j],true.mean.B,true.sd)"
"0","    "
"0","    ###### and now we can run a test!"
"0","    "
"0","    this.test <- t.test(samp.A,samp.B,var.equal = T)"
"0","    "
"0","    ###### and determine if we rejected our null hypothesis (which we know is not true!)"
"0","    "
"0","    pvals[i] <- this.test$p.value"
"0","  }"
"0",""
"0"," # hist(pvals)"
"0",""
"0","  power[j] <- length(which(pvals<0.05))/1000"
"0","}"
"0",""
"0","names(power) <- sampsize"
"0",""
"0","plot(power~sampsize)"
